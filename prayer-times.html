<!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</title>
  <link rel="stylesheet" href="timesstyle.css">
  <link rel="stylesheet" href="navbar.css">
  <link rel="stylesheet" href="base.css">
</head>

<body>
<!-- Navbar -->
<nav class="navbar">
  <div class="navbar-brand">
      <a href="index.html">Prayer Path</a>
  </div>
  <ul class="navbar-menu">
      <li><a href="aboutus.html">Ù…Ù† Ù†Ø­Ù†</a></li>
      <li><a href="daily.html">Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ</a></li>
      <li><a href="prayer-times.html">Ø§ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</a></li>
      <li><a href="duaa.html">Ø§Ù„Ø§Ø¯Ø¹ÙŠØ©</a></li>
      <li><a href="athkarhtml.html">Ø§Ù„Ø§Ø°ÙƒØ§Ø±</a></li>
  </ul>
  <div class="navbar-buttons">
      <a href="login.html">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
      <a href="createacc.html">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>

  </div>
  <div class="profile-icon">
    <a href="profile.html"><img src="icon.png" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ"></a>
</div>
</nav>

  <main>
    <h1>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</h1>

    <!-- Current Location Section -->
    <div class="location" id="location">
      <span>ğŸ“</span><span>Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...</span>
    </div>
    <div class="prayer-container" id="prayer-container">
      <div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©...</div>
    </div>

    <!-- Cities Prayer Times -->
    <section>
      <h2>Ø¬Ø¯Ø©</h2>
      <div class="prayer-container" id="prayer-jeddah"></div>
    </section>

    <section>
      <h2>Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©</h2>
      <div class="prayer-container" id="prayer-makkah"></div>
    </section>

    <section>
      <h2>Ø§Ù„Ø±ÙŠØ§Ø¶</h2>
      <div class="prayer-container" id="prayer-riyadh"></div>
    </section>

    <section>
      <h2>Ø§Ù„Ø¯Ù…Ø§Ù…</h2>
      <div class="prayer-container" id="prayer-dammam"></div>
    </section>
  </main>

  <script>
    const cities = {
      jeddah: { lat: 21.4858, lon: 39.1925 },
      makkah: { lat: 21.3891, lon: 39.8579 },
      riyadh: { lat: 24.7136, lon: 46.6753 },
      dammam: { lat: 26.3927, lon: 49.9777 }
    };

    // Function to fetch prayer times
    function fetchPrayerTimes(lat, lon, containerId) {
      const apiUrl = `https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=4`;

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          const timings = data.data.timings;
          const prayerContainer = document.getElementById(containerId);
          prayerContainer.innerHTML = ""; // Clear previous content

          const prayers = [
            { name: "Ø§Ù„ÙØ¬Ø±", time: timings.Fajr },
            { name: "Ø§Ù„Ø¸Ù‡Ø±", time: timings.Dhuhr },
            { name: "Ø§Ù„Ø¹ØµØ±", time: timings.Asr },
            { name: "Ø§Ù„Ù…ØºØ±Ø¨", time: timings.Maghrib },
            { name: "Ø§Ù„Ø¹Ø´Ø§Ø¡", time: timings.Isha }
          ];

          prayers.forEach(prayer => {
            const card = document.createElement("div");
            card.className = "prayer-card";
            card.innerHTML = `
              <div class="prayer-icon">ğŸ•Œ</div>
              <div class="prayer-name">${prayer.name}</div>
              <div class="prayer-time">${prayer.time}</div>
            `;
            prayerContainer.appendChild(card);
          });
        })
        .catch(error => {
          document.getElementById(containerId).innerHTML = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
        });
    }

    // Fetch current location prayer times
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById("location").innerHTML = "Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.";
      }
    }

    function showPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      fetchPrayerTimes(lat, lon, "prayer-container");
      document.getElementById("location").innerHTML = `ğŸ“ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ`;
    }

    function showError(error) {
      switch (error.code) {
        case error.PERMISSION_DENIED:
          document.getElementById("location").innerHTML = "ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.";
          break;
        case error.POSITION_UNAVAILABLE:
          document.getElementById("location").innerHTML = "Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­.";
          break;
        case error.TIMEOUT:
          document.getElementById("location").innerHTML = "Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.";
          break;
        default:
          document.getElementById("location").innerHTML = "Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ.";
      }
    }

    // Fetch prayer times for static cities
    function fetchCityPrayerTimes() {
      fetchPrayerTimes(cities.jeddah.lat, cities.jeddah.lon, "prayer-jeddah");
      fetchPrayerTimes(cities.makkah.lat, cities.makkah.lon, "prayer-makkah");
      fetchPrayerTimes(cities.riyadh.lat, cities.riyadh.lon, "prayer-riyadh");
      fetchPrayerTimes(cities.dammam.lat, cities.dammam.lon, "prayer-dammam");
    }

    // Initialize
    getLocation();
    fetchCityPrayerTimes();
  </script>
</body>

</html>
